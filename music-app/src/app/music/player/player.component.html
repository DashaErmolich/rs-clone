<div class="player-container player container flex-row accent-section">
  <div class="player__items-group flex-column-3">
    <div class="track-data">
      <div *ngIf="getCurrentTrackIndex() !== null" class="track-data__image">
        <img
        [src]="getTrackAlbumImageSrc()"
        [alt]="getTrackTitle() | titlecase"
        >
      </div>
      <div *ngIf="getCurrentTrackIndex() === null" class="track-data__image">
        <svg class="icon">
          <use xlink:href="../../../assets/icons/sprite.svg#musical-note"></use>
        </svg>
      </div>
      <div class="track-data__titles">
        <span class="one-line-text">{{ getTrackTitle() | titlecase }}</span>
        <span class="one-line-text">{{ getTrackAlbumTitle() | titlecase }}</span>
      </div>
    </div>
    </div>
  <div class="player__items-group flex-column-6">
    <div class="flex-row player-controls">
      <div class="flex-row player-buttons-group">
        <button mat-mini-fab color="basic" (click)="likeTrack()">
          <mat-icon [color]="controlsState.isLiked ? 'warn' : 'basic'">favorite</mat-icon>
        </button>
        <button mat-mini-fab color="basic" (click)="shuffleTracks()">
          <mat-icon>shuffle</mat-icon>
        </button>
      </div>
      <div class="flex-row player-buttons-group">
        <button mat-fab color="basic" (click)="prev()" [disabled]="controlsState.isFirstTrack">
          <mat-icon>skip_previous</mat-icon>
        </button>
        <button mat-fab color="primary" (click)="playPause()">
          <mat-spinner
            mode="indeterminate"
            class="player-spinner-container"
            color="accent"
            *ngIf="!isTrackReady && getCurrentTrackIndex() !== null && !isInitialTrackSet"
          ></mat-spinner >
          <mat-icon
            *ngIf="isTrackReady || getCurrentTrackIndex() === null || isInitialTrackSet"
          >{{ !isPlay ? 'play_arrow' : 'pause' }}</mat-icon>
        </button>
        <button mat-fab color="basic" (click)="next()" [disabled]="controlsState.isLastTrack">
          <mat-icon>skip_next</mat-icon>
        </button>
      </div>
      <div class="flex-row player-buttons-group">
        <button mat-mini-fab [color]="controlsState.isRepeatAllOn ? 'primary' : 'basic'" (click)="toggleRepeatAll()">
          <mat-icon>repeat</mat-icon>
        </button>
        <button mat-mini-fab [color]="controlsState.isRepeatOneOn ? 'primary' : 'basic'" (click)="toggleRepeatOne()">
          <mat-icon>repeat_one</mat-icon>
        </button>
      </div>
    </div>
    <div class="time-progress-container">
      <span>{{ currentState.time }}</span>
      <mat-slider
        min="0"
        [max]="currentState.duration"
        step="0.01"
        (input)="setProgress($event)"
        (click)="setProgress($event)"
        class="player-slider"
        [ngClass]="{'player-slider-small': isSmall}"
        >
        <input matSliderThumb [value]="currentState.progress">
      </mat-slider>
      <span>{{ currentState.durationTime }}</span>
    </div>
  </div>
  <div class="player__items-group flex-column-3">
    <div class="flex-row audio-controls-container">
      <button mat-mini-fab [color]="isEqualizerShown ? 'primary' : 'basic'" (click)="toggleEqualizerVisibility()" [disabled]="!isTrackReady">
        <mat-icon>equalizer</mat-icon>
      </button>
      <div class="volume-container">
        <button mat-mini-fab color="basic" (click)="toggleMute()">
          <mat-icon>{{ !isMute ? 'volume_up' : 'volume_off' }}</mat-icon>
        </button>
        <mat-slider min="0" max="1" step="0.01">
          <input matSliderThumb [value]="currentState.volume" (input)="setVolume($event)" (click)="setVolume($event)">
        </mat-slider>
      </div>
    </div>
  </div>
</div>
<app-equalizer *ngIf="isEqualizerShown" @showEqualizer class="equalizer"></app-equalizer>
